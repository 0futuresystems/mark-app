/* src/components/camera/ios-camera.css */
:root {
  --bar-bg: rgba(0,0,0,.34);
  --bar-fg: #fff;
  --ring-size: clamp(64px, 18vw, 82px);
  --ring-border: 4px;
  --thumb-size: 44px;
}
.iosCam__overlay {
  position: fixed; 
  top: 0; 
  left: 0; 
  right: 0;
  bottom: 0;
  z-index: 60;
  display: flex; 
  flex-direction: column;
  background: #000; /* full black behind video */
  touch-action: none;
  /* Use visual viewport height to avoid mobile browser UI overlap */
  height: var(--cam-viewport-height, 100dvh);
  min-height: var(--cam-viewport-height, 100svh);
}
.iosCam__videoWrap {
  position: relative; flex: 1; overflow: hidden; background: #000;
}
.iosCam__video {
  width: 100%; height: 100%;
  object-fit: cover; /* fills like iPhone */
  transform: translateZ(0);
}
.iosCam__flash {
  position: absolute; inset: 0; background: white; opacity: 0; pointer-events: none;
  transition: opacity 140ms ease-out;
}
.iosCam__flash--show { opacity: .9; }
.iosCam__topBar, .iosCam__bottomBar {
  display: flex; align-items: center; justify-content: space-between;
  padding: 16px 20px;
  background: var(--bar-bg);
  color: var(--bar-fg);
  -webkit-backdrop-filter: blur(20px);
  backdrop-filter: blur(20px);
}
.iosCam__topBar { 
  padding-top: calc(env(safe-area-inset-top) + 8px);
  padding-left: calc(env(safe-area-inset-left) + 20px);
  padding-right: calc(env(safe-area-inset-right) + 20px);
}
.iosCam__bottomBar { 
  padding: 20px calc(env(safe-area-inset-right) + 20px) max(env(safe-area-inset-bottom, 34px), var(--cam-bottom-offset, 34px)) calc(env(safe-area-inset-left) + 20px);
  justify-content: center;
  position: relative;
  min-height: max(140px, var(--cam-min-bottom-height, 140px));
  display: grid;
  grid-template-columns: 1fr auto 1fr;
  align-items: center;
  gap: 16px;
}
.iosCam__btn {
  display: inline-flex; align-items: center; gap: 8px;
  border: 0; background: transparent; color: var(--bar-fg);
  font: 500 17px/1.2 ui-sans-serif, -apple-system, BlinkMacSystemFont, "SF Pro Text", "Helvetica Neue", Arial, sans-serif;
}
.iosCam__btn--ghost { opacity: .9; }
.iosCam__shutterWrap {
  position: relative; width: var(--ring-size); height: var(--ring-size);
  border-radius: 50%; display: grid; place-items: center;
  transition: all 0.15s ease;
}
.iosCam__shutterRing {
  position: absolute; inset: 0;
  border-radius: 50%; border: var(--ring-border) solid white;
  box-shadow: 
    0 0 0 2px rgba(255,255,255,.15), 
    0 4px 20px rgba(0,0,0,.4),
    0 0 0 1px rgba(0,0,0,.1) inset;
  transition: all 150ms ease-out;
}
.iosCam__shutterCore {
  width: calc(var(--ring-size) - 16px); height: calc(var(--ring-size) - 16px);
  border-radius: 50%; background: white; 
  transition: all 150ms ease-out;
  box-shadow: 0 2px 8px rgba(0,0,0,.2);
}
.iosCam__shutterWrap:active .iosCam__shutterCore { 
  transform: scale(.85); 
  box-shadow: 0 1px 4px rgba(0,0,0,.3);
}
.iosCam__shutterWrap:active .iosCam__shutterRing { 
  transform: scale(.96); 
  box-shadow: 
    0 0 0 2px rgba(255,255,255,.25), 
    0 2px 12px rgba(0,0,0,.5),
    0 0 0 1px rgba(0,0,0,.15) inset;
}
.iosCam__leftControls {
  display: flex;
  align-items: center;
  justify-content: flex-start;
  padding-left: 8px; /* Extra spacing to prevent edge clipping */
}

.iosCam__centerControls {
  display: flex;
  align-items: center;
  justify-content: center;
}

.iosCam__rightControls {
  display: flex;
  align-items: center;
  justify-content: flex-end;
  padding-right: 8px; /* Extra spacing to prevent edge clipping */
}

.iosCam__thumb {
  width: var(--thumb-size); height: var(--thumb-size); 
  border-radius: 12px; overflow: hidden;
  border: 2px solid rgba(255,255,255,.3); 
  background: rgba(255,255,255,.1);
  transition: all 0.2s ease;
  min-height: var(--thumb-size);
  min-width: var(--thumb-size);
}

.iosCam__thumb:active {
  transform: scale(0.95);
  border-color: rgba(255,255,255,.5);
}

.iosCam__thumbEmpty {
  width: 100%; height: 100%;
  background: rgba(255,255,255,.05);
}
.iosCam__thumb img { width: 100%; height: 100%; object-fit: cover; display: block; }
.iosCam__controlsGroup {
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: 16px;
  padding: 8px 0;
}

.iosCam__iconBtn {
  width: 44px; height: 44px;
  border-radius: 22px;
  border: none;
  background: rgba(255,255,255,.15);
  color: white;
  display: flex;
  align-items: center;
  justify-content: center;
  transition: all 0.2s ease;
  -webkit-backdrop-filter: blur(10px);
  backdrop-filter: blur(10px);
  min-height: 44px;
  min-width: 44px;
}

.iosCam__iconBtn:active {
  transform: scale(0.9);
  background: rgba(255,255,255,.25);
}

.iosCam__zoomControls {
  display: flex;
  background: rgba(255,255,255,.15);
  border-radius: 20px;
  padding: 6px;
  gap: 4px;
  -webkit-backdrop-filter: blur(10px);
  backdrop-filter: blur(10px);
}

.iosCam__zoomBtn {
  width: 32px; height: 32px;
  border-radius: 16px;
  border: none;
  background: transparent;
  color: white;
  display: flex;
  align-items: center;
  justify-content: center;
  transition: all 0.2s ease;
  min-height: 32px;
  min-width: 32px;
}

.iosCam__zoomBtn:not(:disabled):active {
  background: rgba(255,255,255,.2);
  transform: scale(0.9);
}

.iosCam__zoomBtn:disabled {
  opacity: 0.4;
}

.iosCam__zoomIndicator {
  position: absolute;
  top: calc(env(safe-area-inset-top) + 24px);
  right: calc(env(safe-area-inset-right) + 24px);
  background: rgba(0, 0, 0, 0.7);
  color: white;
  padding: 8px 12px;
  border-radius: 8px;
  font-size: 13px;
  font-weight: 600;
  -webkit-backdrop-filter: blur(10px);
  backdrop-filter: blur(10px);
  border: 1px solid rgba(255,255,255,.1);
}
